@using NetApp.Entities.Avmt
@using Microsoft.AspNetCore.Http
@using Microsoft.AspNetCore.Http.Extensions
@model IEnumerable<FunctionLocation>
@{
    ViewData["Title"] = "WorkspaceDetailView";
    Layout = "~/Views/Shared/_Layout2.cshtml";
    int index = ViewBag.CurrentIndex;
    int pageSize = ViewBag.PageSize;
    int nextIndex = index + pageSize;
    int previousIndex = index - pageSize;
    @if (previousIndex < 0)
    {
        previousIndex = 0;
    }
    Context.Session.SetString("1231", "mim");
    var billId = TempData["billId"]?.ToString();
    Func<int, string> runningState = (n) =>
    {
        switch (n)
        {
            case 1:
                return "运行";
            case 2:
                return "在建";
            default:
                return "未知";
        }
    };
}
<p>
    <a asp-action="Index">Back To Bill</a>
</p>
<table class="table">
    <thead>
        <tr>
            <th>
                序号
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FlName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.RunningState)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FlCode)
            </th>
            <th>
                类别
            </th>
            <th>
                @Html.DisplayNameFor(model => model.UpdateTime)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @(++index)
                </td>
                <td title="@item.FullPath">
                    <a asp-action="FunctionLocationDetail" asp-route-id="@item.Id" asp-route-workspaceId="@item.WorkspaceId">@Html.DisplayFor(modelItem => item.FlName)</a>
                </td>
                <td>
                    @runningState(item.RunningState)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.FlCode)
                </td>
                @{
                    Classify classify = ((IEnumerable<Classify>)ViewBag.Classifies).FirstOrDefault(c => c.Id == item.ClassifyId);
                    <td title="@classify.FullName">
                        @classify.ClassifyName
                    </td>
                }
                <td>
                    @Html.DisplayFor(modelItem => item.UpdateTime)
                </td>
            </tr>
        }
    </tbody>
</table>
<div class="btn-group">
    <a asp-route-startindex="@previousIndex" class="btn btn-default">上一页</a>
    <a asp-route-startindex="@nextIndex" class="btn btn-default">下一页</a>
</div>
